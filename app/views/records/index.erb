<div class = "page_header">

<h1>Record Database</h1>
  <% if flash.has?(:message)%>
    <h3><%=flash[:message]%></h3>
  <%end%>


<form action = "/records" method = "post">
  <label>Mode:
  <input type = "radio" name = "mode" value = "Records" <%if @mode == "Records"%>checked = "checked"<%end%> >Records</input>
  <input type = "radio" name = "mode" value = "Artists" <%if @mode == "Artists"%>checked = "checked"<%end%>>Artists</input>
  <input type = "radio" name = "mode" value = "Labels" <%if @mode == "Labels"%>checked = "checked"<%end%>>Labels</input>
  <input type = "submit" value = "Change Mode">
</form><br></br>
<form action = "/records/new">
  <input type = "submit" value = "Add New Record">
</form></br>
</div><!--page header-->

<%if @mode == "Records"%>
  <table>
  <%Record.all.order(name: :asc).each do |r|%>
    <tr>
      <td><a href = "/records/<%=r.slug%>"><%=r.name%></a></td>
      <td> <%=r.artist.name%><br></td>
    </tr>
  <%end%>
 </table>
<%end%>

<%if @mode == "Artists"%>
  <table>
    <%Artist.all.order(name: :asc).uniq.each do |a|%>
      <tr>
        <td><h3><%=a.name%></h3></td>
      </tr>
    <%Record.all.where("artist_id == #{a.id}").each do |r|%>
      <tr>
        <td><a href = "/records/<%=r.slug%>"><%=r.name%></a></td>
      </tr>
      <%end%>
  <%end%>
</table>
<%end%>

<%if @mode == "Labels"%>
  <table>
  <%Label.all.order(name: :asc).uniq.each do |l|%>
    <tr>
      <td><h3><%=l.name%></h3></td>
      <td></td>
    </tr>
    <%Record.all.where("label_id == #{l.id}").each do |r|%>
      <tr>
        <td><a href = "/records/<%=r.slug%>"><%=r.name%>  </a></td>
        <td><%=r.artist.name%></br></td>
      </tr>
      <%end%>
  <%end%>
</table>

  <%end%>
